[root@rhel3 monitoring]# cat notes.txt
Prometheus

1) Install Helm (cf blog)

wget https://get.helm.sh/helm-v3.0.3-linux-amd64.tar.gz
tar xzvf helm-v3.0.3-linux-amd64.tar.gz
cp linux-amd64/helm /usr/bin/

2) Install Prometheus (cf blog)

kubectl create namespace monitoring
helm repo add stable https://kubernetes-charts.storage.googleapis.com
helm repo update
helm install prom-operator stable/prometheus-operator --namespace monitoring

3) Expose Prometheus

# Blog  kubectl port-forward -n monitoring prometheus-prom-operator-prometheus-0 9090

kubectl delete -n monitoring svc prom-operator-prometheus-o-prometheus
kubectl apply -f /root/demo-trident/making/monitoring/prometheus/service-prom-operator-prometheus.yaml


4) Create a Service Monitor for Trident (cf blog)

kubectl apply -f /root/demo-trident/making/monitoring/prometheus/servicemonitor.yaml

http://192.168.0.140/targets

************************************************************

kubectl delete -n monitoring svc prom-operator-grafana
kubectl apply -f /root/demo-trident/making/monitoring/grafana/service-prom-operator-grafana.yaml

kubectl apply -f /root/demo-trident/making/monitoring/grafana/cm-grafana-datasources.yaml

kubectl create configmap cm-grafana-dashboard -n monitoring --from-file=/root/demo-trident/making/monitoring/grafana/dashboards/

kubectl patch secret -n monitoring prom-operator-grafana -p='{"data":{"admin-password": "YWRtaW4="}}' -v=1

kubectl delete deployment prom-operator-grafana -n monitoring
kubectl apply -f /root/demo-trident/making/monitoring/grafana/deployment-prom-operator-grafana.yaml

kubectl get secret --namespace monitoring prom-operator-grafana -o jsonpath="{.data.admin-password}" | base64 --decode ; echo


--> http://192.168.0.141/login
user = admin / password = admin & Skip to create new password

